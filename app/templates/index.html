<!DOCTYPE html>
<head>
  <title>Futurama Data from different places</title>
  <link rel="stylesheet" type="text/css" href="/static/stylesheets/main.css">
</head>
<body>
  <div class='main'>
    <div class='main'>Below are the details for <span class='boldy'>{{ tree }}</span></div>
    <div class='yetAnotherContainer'>
        <div class='backouts floaty'><div class='omg'>{{ backouts['backouts'] }}</div><br> backouts were performed for {{ backouts['total'] }}     pushes since the beginning of {{ backouts['startdate'] }} (roughly the last 7 days). Merges are not counted</div>
        <div class='backouts floaty'><div class='omg'>{{ today['backouts'] }}</div><br> backouts were performed for {{ today['total'] }}     pushes since the beginning of today. Merges are not counted</div>
    </div>
    <div class='floaty wide' id="closuresContainer"></div>
    <div class='floaty wide' id='backoutsVsPushContainer'></div>

    <div><a href="/?tree=mozilla-inbound">Mozilla-Inbound</a> | <a href="/?tree=mozilla-central">Mozilla-Central</a> |
         <a href="/?tree=fx-team">FX-Team</a></div>
  </div>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script src="http://code.highcharts.com/highcharts.js"></script>
  <script type="text/javascript">
  $(function () {
      $('#closuresContainer').highcharts({
          chart: {
              type: 'area'
          },
          title: {
              text: 'closures'
          },
          xAxis: {
            categories: {{ total["x"]|safe }},
          },
          yAxis: {
            title: {
              text: "Closure in hours",
            },
          },
          series: [
          {% for tot in total["y"] %}
          {
              name: "{{ tot }}",
              data: {{ total["y"][tot] }}
          },
          {% endfor %}
          ],
          plotOptions: {
            area: {
                stacking: 'normal',
            },
          }
      });
      $('#backoutsVsPushContainer').highcharts({
        chart: {
          type: 'line',
        },
        title: {
          'text': 'Pushes and Backouts',
        },
        xAxis: {
          categories: {{ total["x"]|safe }},
        },
        yAxis: {
          title: {
            text: "Pushes",
          },
        },
        series: [
          {
            name: "backouts",
            data: [172, 145, 202,156,187,200,177,260,217,227,214,276,263,290,262,304,244,248,283,320,298,59]
          },
          {
            name: "pushes",
            data: [3261,2653,3255,2736,2684,3336,3103,3456,3239,3416,3474,4156,4153,4382,3854,4383,3599,4525,4908,4896,4701,105]
          },
        ],
      });
  });
  </script>
</body>
